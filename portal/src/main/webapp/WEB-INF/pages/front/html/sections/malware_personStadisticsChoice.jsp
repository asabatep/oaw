<%@ include file="/common/taglibs.jsp" %> 
<%@page import="es.inteco.common.Constants"%>
<%@page import="java.util.HashMap"%>
<html:xhtml/>
<html:javascript formName="PersonStadisticsChoiceForm"/>

	<bean:parameter id="idRastreo" name="<%= Constants.ID_RASTREO %>"/>
	<bean:parameter id="id" name="<%= Constants.ID %>"/>
	<bean:parameter name="<%= Constants.TYPE_PS_PARAM %>" id="isHT"/>
	
	<bean:define id="idRastreoParam" value="<%= Constants.ID_RASTREO %>" />
	<bean:define id="idParam" value="<%= Constants.ID %>" />
	
	<jsp:useBean id="paramsPS" class="java.util.HashMap" />
	<c:set target="${paramsPS}" property="${idRastreoParam}" value="${idrastreo}" />
	<c:set target="${paramsPS}" property="${idParam}" value="${id}" />
	
	<div id="migas">
		<p class="oculto"><bean:message key="ubicacion.usuario" /> </p>
		<p>
			<html:link forward="indexAdmin"><bean:message key="migas.inicio" /></html:link> / 
			<html:link forward="crawlingsMenu"><bean:message key="migas.rastreo" /></html:link> /
		 	<html:link forward="verRastreosRealizados" paramId="<%= Constants.ID_RASTREO %>" paramName="idRastreo"><bean:message key="migas.rastreos.realizados" /></html:link>
		 	/ <html:link forward="pStadistics" name="paramsPS"><bean:message key="migas.malware.personal.stadistic"/> </html:link>
	 		<logic:equal name="isHT" value="<%= Constants.TYPE_PS_PARAM_MODULE %>">
				/ <bean:message key="migas.malware.personal.stadistic.module"/>
			</logic:equal>
			<logic:equal name="isHT" value="<%= Constants.TYPE_PS_PARAM_HIT %>">
				/ <bean:message key="migas.malware.personal.stadistic.hit"/>
			</logic:equal>
			<logic:equal name="isHT" value="<%= Constants.TYPE_PS_PARAM_TERM %>">
				/ <bean:message key="migas.malware.personal.stadistic.termino"/>
			</logic:equal>
		</p>
	</div>
	
	<div id="cuerpo">
		<div id="cIzq">&nbsp;</div>
		<div id="contenido">
			<div id="main">
				<h1 class="bulleth1"> <bean:message key="malware.personal.stadistics"/> </h1>
	
				<div id="cuerpoprincipal">
					
					<div id="container_menu_izq">
						<jsp:include page="menu.jsp"/>
					</div>
					
					<div id="container_der">
						<html:form action="/secure/PersonalStadistics.do" method="get" styleClass="formulario" onsubmit="return validatePersonStadisticsChoiceForm(this)">
							<input type="hidden" name="<%= Constants.ID_RASTREO %>" value="<%= idRastreo %>"/>
							<input type="hidden" name="<%= Constants.ID %>" value="<%= id %>"/>
							<input type="hidden" name="<%= Constants.TYPE_PS_PARAM %>" value="<%= isHT %>"/>
							<h2 class="config"><bean:message key="malware.personal.stadistics" /></h2>
							
							<logic:equal name="isHT" value="<%= Constants.TYPE_PS_PARAM_MODULE %>">
								<input type="hidden" name="<%= Constants.ACTION %>" value="<%= Constants.MODULE_RESULTS_PS %>"/>
								<p><bean:message key="malware.personal.stadistics.choice.module" /></p>
							</logic:equal>
							<logic:equal name="isHT" value="<%= Constants.TYPE_PS_PARAM_HIT %>">
								<input type="hidden" name="<%= Constants.ACTION %>" value="<%= Constants.HIT_RESULTS_PS %>"/>
								<p><bean:message key="malware.personal.stadistics.choice.hit" /></p>
							</logic:equal>
							<logic:equal name="isHT" value="<%= Constants.TYPE_PS_PARAM_TERM %>">
								<input type="hidden" name="<%= Constants.ACTION %>" value="<%= Constants.TERM_RESULTS_PS %>"/>
								<p><bean:message key="malware.personal.stadistics.choice.term" /></p>
							</logic:equal>
							
							<fieldset>
								<div class="formItem">
									<logic:notEmpty name="<%= Constants.MALWARE_HITS_LIST %>">
										<html:select size="5" multiple="true" styleClass="textoSelect" styleId="electionList" property="electionList" >
											<logic:iterate name="<%= Constants.MALWARE_HITS_LIST %>" id="elemento">
												<bean:define id="idH"><bean:write name="elemento" property="id"/></bean:define>
												<html:option value="<%=idH %>"><bean:write name="elemento" property="name"/></html:option>
											</logic:iterate>
										</html:select>
										<div class="formItem">
											<label for="weight"><strong class="labelVisu"><acronym title="<bean:message key="campo.obligatorio" />"> * </acronym><bean:message key="malware.personal.stadistics.peso" />: </strong></label>
											<html:text property="weight" styleId="weight" styleClass="texto" value="0.0"/>
										</div>
										<html:hidden property="occurrence" value="0"/>
									</logic:notEmpty>
									<logic:notEmpty name="<%= Constants.MALWARE_TERMS_LIST %>">
										<html:select size="5" multiple="true" styleClass="textoSelect" styleId="electionList" property="electionList" >
											<logic:iterate name="<%= Constants.MALWARE_TERMS_LIST %>" id="elemento">
												<bean:define id="idT"><bean:write name="elemento" property="id"/></bean:define>
												<html:option value="<%=idT %>"><bean:write name="elemento" property="term"/></html:option>
											</logic:iterate>
										</html:select>
										<div class="formItem">
											<label for="occurrence"><strong class="labelVisu"><acronym title="<bean:message key="campo.obligatorio" />"> * </acronym><bean:message key="malware.personal.stadistics.occurrence" />: </strong></label>
											<html:text property="occurrence" styleId="occurrence" styleClass="texto" value="0"/>
										</div>
										<html:hidden property="weight" value="0.0"/> 
									</logic:notEmpty>
								</div>
								
								<div class="formButton">
									<html:submit><bean:message key="boton.aceptar" /></html:submit>
									<html:cancel><bean:message key="boton.volver"/></html:cancel>
								</div>
							</fieldset>
						</html:form>
					</div>
				</div><!-- fin CUERPO PRINCIPAL -->
			</div>
		</div>	
	</div> 
